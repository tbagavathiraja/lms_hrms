<div class="row">
	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 loading-icon" *ngIf="isLoading">
		<img src="assets/img/loading-large.gif" />
	</div>
  <div class="col-sm-12 success-message" *ngIf="!isLoading">
    <div *ngIf="successMsg"  class="alert alert-success">{{successMsg.message}}</div>
  </div>

<div class="row" *ngIf="!isLoading">
	<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"><h2>Period Summary</h2></div>
	<div class="col-xs-6 col-sm-4 col-md-4 col-lg-4 text-right margin-top-20px">
		<input type="text" formControlname="search" (keyup.enter)="periodSummary()" placeholder="Search" class="form-control" [(ngModel)]="search" [ngModelOptions]="{standalone: true}">
	</div>
	<div class="col-xs-4 col-sm-1 col-md-1 col-lg-1 text-right margin-top-20px	adding-left-0px">
		<button type="button" (click)="periodSummary()" class="btn btn-info btn-padding">
			<span class="glyphicon glyphicon-search hidden-xs"></span> Search
		</button>
	</div>
	<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1 text-right">
		<h2><a class="font-30" [routerLink]="['/period/add']" title="Add Period"><i class="fa fa-plus-circle" aria-hidden="true"></i></a></h2>
	</div>
</div>


<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 table-responsive" *ngIf="!isLoading && itemCount >0">
    <data-table id="period-grid" headerTitle=""[indexColumn]="false" [items]="items" [substituteRows]="false" [limit]="15" [itemCount]="itemCount" (reload)="reloadItems($event)">

      <data-table-column [property]="'start_date'" [header]="'Period'" [sortable]="true">
        <ng-template #dataTableCell let-item="item">
          <div class="text-left">
            {{item.start_date_list | date:'yyyy-MM-dd'}} to {{item.end_date_list | date:'yyyy-MM-dd'}}
          </div>
        </ng-template>
      </data-table-column>
      <data-table-column [property]="'submission_start_date'" [header]="'Submission start date'" [sortable]="true">
        <ng-template #dataTableCell let-item="item">
        <div class="text-right">
          {{item.submission_start_date_list | date}}
        </div>
        </ng-template>
      </data-table-column>

      <data-table-column [property]="'submission_end_date'" [header]="'Submission end date'" [sortable]="true">
        <ng-template #dataTableCell let-item="item">
          <div class="text-right">
            {{item.submission_end_date_list | date}}
          </div>
        </ng-template>
      </data-table-column>
      <data-table-column [property]="'resubmission_end_date'" [header]="'Resubmission end date'" [sortable]="true">
        <ng-template #dataTableCell let-item="item">
        <div class="text-right">
          {{item.resubmission_end_date_list | date}}
        </div>
        </ng-template>
      </data-table-column>
      <data-table-column [property]="'Action'" [header]="'Action'" width="10%" [resizable]="true">
        <ng-template #dataTableCell let-item="item">
          <div class="text-center">
            <a routerLink="/period/edit/{{item.period_id}}" title="Edit Period"><i class="fa fa-pencil" aria-hidden="true"></i></a>
            | <a (click)="delete_period(item.period_id,deleteModal)" title="Delete Period"><i class="fa fa-trash" aria-hidden="true"></i></a>
          </div>
        </ng-template>
      </data-table-column>
    </data-table>
</div>
  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" *ngIf="!isLoading && itemCount ==0">
    <div class="well">
      <p class="text-center">No Summary Found</p>
    </div>
  </div>
</div>

<modal #deleteModal>
  <modal-header>
    <h3>Delete Confirmation</h3>
  </modal-header>
  <modal-content>
    <p>Are you sure want to delete assessment period ? </p>
  </modal-content>
  <modal-footer>
    <button class="btn btn-danger" (click)="delete_confirm(deleteModal)">Delete</button>
    <button class="btn btn-close" (click)="deleteModal.close()">Close</button>
  </modal-footer>
</modal>